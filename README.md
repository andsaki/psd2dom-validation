# psd2dom-validation

ag-psdライブラリの検証とデモプロジェクトです。PSDファイルをアップロードして、DOM構造への変換を確認できます。

## 機能

- PSDファイルのドラッグ&ドロップアップロード
- PSD情報の表示（サイズ、カラーモード、解像度など）
- レイヤー構造の詳細表示
- プレビュー画像の生成と表示
- サンプルファイルによる動作確認

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:5173` を開きます。

### 3. ビルド

```bash
npm run build
```

ビルドされたファイルは `dist/` ディレクトリに出力されます。

## 使い方

### PSDファイルのアップロード

1. メインページの「ファイルを選択」ボタンをクリック、またはPSDファイルをドラッグ&ドロップ
2. PSDファイルが自動的に解析されます
3. 以下の情報が表示されます：
   - PSD情報（サイズ、カラーモード、レイヤー数など）
   - プレビュー画像
   - レイヤー構造（各レイヤーの名前、タイプ、位置、サイズなど）

### サンプルファイルの使用

`samples/` ディレクトリにPSDファイルを配置すると、サンプルボタンから読み込めます：

1. `samples/` ディレクトリにPSDファイルを配置（例: `sample1.psd`, `sample2.psd`, `sample3.psd`）
2. ページ上のサンプルボタンをクリック

## プロジェクト構造

```
psd2dom-validation/
├── index.html              # メインHTMLファイル
├── package.json            # プロジェクト設定とdependencies
├── samples/                # サンプルPSDファイル用ディレクトリ
│   └── .gitkeep
├── src/
│   ├── main.js            # メインアプリケーションロジック
│   └── psdParser.js       # PSD解析ユーティリティ
└── README.md              # このファイル
```

## 使用ライブラリ

- [ag-psd](https://github.com/Agamnentzar/ag-psd) - 詳細メタデータやレイヤー構造の解析に使用
- [@webtoon/psd](https://github.com/webtoon/psd) - WebAssemblyベースの高速コンポジットでプレビュー画像を生成
- [Vite](https://vitejs.dev/) - 開発サーバーとビルドツール

## 検証項目

このプロジェクトで検証できる項目：

- [x] PSDファイルの基本情報読み取り
- [x] レイヤー構造の解析
- [x] プレビュー画像の生成
- [x] ドラッグ&ドロップアップロード
- [x] 複数のPSDファイルのサンプル比較

## ブラウザサポート

モダンブラウザ（Chrome, Firefox, Safari, Edge最新版）をサポートしています。

## トラブルシューティング

### PSDファイルが読み込めない

- ファイルが破損していないか確認
- Photoshop CCまたはCS6以降で保存されたPSDファイルを使用
- ファイルサイズが大きすぎる場合、ブラウザのメモリ制限に達する可能性があります

### プレビューが表示されない

- レイヤーが結合されていないPSDファイルの場合、プレビュー生成に時間がかかる場合があります
- コンソールでエラーメッセージを確認してください

## ライセンス

MIT License

## 貢献

バグ報告や機能要望は、Issuesでお願いします。
